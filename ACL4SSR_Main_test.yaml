#https://github.com/ACL4SSR/ACL4SSR/tree/master


proxy-groups:
# 代理模式
  - name: 代理模式  #选择：直连，XX区域优选，均衡负载，手动选择  
    #include-all: true
    type: select
    proxies:
      - DIRECT
      - 香港节点
      - 新加坡节点
      - 日本节点
      - 美国节点
      - 手动选择

  - name: 手动选择 #显示所有节点，指定线路
    include-all: true
    type: select
 #轮询，在香港新加坡节点中轮询

# 大厂线路
  - name: 谷歌服务 
    include-all: true
    type: select
  - name: 微软服务
    include-all: true
    type: select
  - name: 苹果服务
    include-all: true
    type: select


# 应用服务
  - name: AIGC
    #include-all: true
    type: select
    proxies:
      - 代理模式
      - 手动选择
      - 香港节点
      - 新加坡节点
      - 日本节点
      - 美国节点
      - DIRECT
  - name: Github
    include-all: true
    type: select
  - name: Youtube
    include-all: true
    type: select
  - name: 电报消息
    include-all: true
    type: select
  - name: 网盘服务
    include-all: true
    type: select
  - name: 游戏通道 # steam等游戏平台，排除epic
  
    include-all: true
    type: select
  - name: 下载通道
    include-all: true
    type: select
  - name: 广告拦截
    #include-all: true
    type: select
    proxies:
      - REJECT
      - DIRECT
  - name: 隐私防护
    #include-all: true
    type: select
    proxies:
      - REJECT
      - DIRECT



# 地区选择
  - name: 香港节点
    include-all: true
    filter: (?i)港|HK|hk|Hong Kong|HongKong|hongkong
    type: url-test
    interval: 300
    tolerance: 50
  - name: 新加坡节点
    include-all: true
    filter: (?i)新加坡|坡|狮城|SG|Singapore
    type: url-test
    interval: 300
    tolerance: 50
  - name: 日本节点
    include-all: true
    filter: (?i)日本|川日|东京|大阪|泉日|埼玉|沪日|深日|JP|Japan
    type: url-test
    interval: 300
    tolerance: 50
  - name: 美国节点
    include-all: true
    filter: (?i)美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|United States
    type: url-test
    interval: 300
    tolerance: 50

# 备用设置
  - name: 全局直连
  
    include-all: true
    type: select
  - name: 全局拦截
  
    include-all: true
    type: select
  - name: 漏网之鱼
  
    include-all: true
    type: select

  - name: 故障转移
    include-all: true
    type: fallback
    proxies:
      - 香港节点
      - 新加坡节点
      - 日本节点
      - 美国节点

    url: 'https://www.gstatic.com/generate_204'
    interval: 1000

# 自定义

#rule-anchor:
#  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: list}
#  domain: &domain {type: http, interval: 86400, behavior: domain, format: list}
#  classical: &classical {type: http, interval: 86400, behavior: classical, format: yaml}
#


rule-providers:
#============================特殊规则============================#
    #广告规则
  reject:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
    path: ./ruleset/reject.yaml
    interval: 86400

    # 隐私规则
  privacy:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/Privacy/Privacy.yaml
    path: ./ruleset/privacy.yaml
    interval: 86400

    # 广告扩展规则
  reject-extra:
    type: http
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Clash/AdvertisingLite/AdvertisingLite.yaml
    path: ./ruleset/reject-extra.yaml
    interval: 86400

    #GFW名单
  ProxyGFWlist:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
    path: ./ruleset/ProxyGFWlist.yaml
    interval: 86400

  Collection: 
    type: http
    behavior: classical
    url: https://gist.githubusercontent.com/cnfree8964/0864fd1d2e88936a095fb40d74ce4993/raw/collection.yaml
    path: ./ruleset/collection.yaml


#============================应用服务============================#
  Gemini:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Gemini/Gemini.list
    path: ./ruleset/gemini.yaml

  OpenAI:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/OpenAI/OpenAI.list
    path: ./ruleset/openai.yaml



rules:
  # 优先处理
  - RULE-SET,reject,广告拦截,no-resolve
  - RULE-SET,reject-extra,广告拦截,no-resolve
  - RULE-SET,privacy,隐私防护,no-resolve
  - RULE-SET,Collection,DIRECT,no-resolve


  #应用服务
  - RULE-SET,Gemini,AIGC,no-resolve
  - RULE-SET,OpenAI,AIGC,no-resolve







  # 兜底规则
  - RULE-SET,ProxyGFWlist,代理模式,force-remote-dns
  - GEOIP,LAN,DIRECT,no-resolve
  - GEOIP,CN,DIRECT,no-resolve
  - MATCH,代理模式